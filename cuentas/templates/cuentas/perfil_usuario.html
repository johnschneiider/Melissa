{% extends 'base.html' %}
{% load static %}

{% block title %}Mi Perfil - Melissa{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-lg-4 mb-4">
            <div class="card shadow h-100">
                <div class="card-body d-flex flex-column align-items-center">
                    <div class="position-relative mb-3">
                        <img src="https://ui-avatars.com/api/?name={{ user.first_name }}+{{ user.last_name }}&background=random" class="rounded-circle" style="width: 100px; height: 100px; object-fit: cover; border: 3px solid #eee;">
                        <button id="btn-editar-perfil" class="btn btn-link position-absolute top-0 end-0 text-decoration-none" style="font-size:0.95rem;">Editar</button>
                    </div>
                    <h3 class="fw-bold text-center mb-3">{{ user.first_name }} {{ user.last_name }}</h3>
                    <hr class="w-100 mb-3">
                    <div class="w-100">
                        <form id="form-editar-perfil" method="post" style="display:none;">
                            {% csrf_token %}
                            {{ form.as_p }}
                            <div class="d-flex justify-content-between mt-3">
                                <button type="submit" class="btn btn-primary btn-sm">Guardar</button>
                                <button type="button" id="btn-cancelar-edicion" class="btn btn-outline-secondary btn-sm">Cancelar</button>
                            </div>
                        </form>
                        <div id="info-perfil">
                            <p class="mb-1"><strong>Nombre</strong><br>{{ user.first_name|default:"-" }}</p>
                            <p class="mb-1"><strong>Apellido</strong><br>{{ user.last_name|default:"-" }}</p>
                            <p class="mb-1"><strong>Número de teléfono</strong><br>{{ user.telefono|default:"-" }}</p>
                            <p class="mb-1"><strong>Email</strong><br>{{ user.email|default:"-" }}</p>
                            <p class="mb-1"><strong>Fecha de nacimiento</strong><br>{{ user.fecha_nacimiento|default:"-" }}</p>
                            <p class="mb-1"><strong>Género</strong><br>{{ user.genero|default:"-" }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-6 mb-4">
            <div class="card shadow h-100">
                <div class="card-body">
                    <h4 class="fw-bold mb-4">Mis direcciones</h4>
                    <div class="mb-3">
                        <div class="card mb-2 p-2">
                            <div class="d-flex align-items-center">
                                <span class="me-3"><i class="bi bi-house-door fs-4"></i></span>
                                <div>
                                    <div class="fw-semibold">Inicio</div>
                                    <div class="text-muted small">Añadir la dirección de un domicilio</div>
                                </div>
                            </div>
                        </div>
                        <div class="card mb-2 p-2">
                            <div class="d-flex align-items-center">
                                <span class="me-3"><i class="bi bi-briefcase fs-4"></i></span>
                                <div>
                                    <div class="fw-semibold">Trabajo</div>
                                    <div class="text-muted small">Añadir una dirección de trabajo</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-outline-secondary btn-sm"><i class="bi bi-plus-circle"></i> Añadir</button>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
  const btnEditar = document.getElementById('btn-editar-perfil');
  const btnCancelar = document.getElementById('btn-cancelar-edicion');
  const formEditar = document.getElementById('form-editar-perfil');
  const infoPerfil = document.getElementById('info-perfil');
  btnEditar.addEventListener('click', function() {
    formEditar.style.display = '';
    infoPerfil.style.display = 'none';
    btnEditar.style.display = 'none';
  });
  btnCancelar.addEventListener('click', function() {
    formEditar.style.display = 'none';
    infoPerfil.style.display = '';
    btnEditar.style.display = '';
  });
</script>
{% endblock %} 